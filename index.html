<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Japan Itinerary</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #F8F9FA;
      padding: 1.5rem;
    }

    /* Set up a two-column layout for screens wider than 768px (md breakpoint) */
    @media (min-width: 768px) {
      body {
        display: grid;
        grid-template-columns: 18rem 1fr; /* 18rem sidebar, rest for main content */
        gap: 1.5rem;
      }
      aside {
        position: sticky; /* Keep the navigation fixed on the side */
        top: 1.5rem;
        align-self: start;
        height: fit-content; /* Ensure the height doesn't extend unnecessarily */
      }
      .main-container {
        grid-area: main;
      }
    }
    
    h1, h2 {
      font-family: 'Merriweather', serif;
    }
    
    /* Styles for the responsive itinerary grid view */
    .itinerary-grid {
      display: flex;
      flex-direction: column; /* Default to a single column for mobile */
      gap: 1rem;
    }
    .itinerary-grid .segment-card {
        width: 100%; /* Full width for cards on mobile */
        min-height: auto;
        margin-bottom: 0;
        border: 1px solid #E5E7EB; /* Subtle border for the "cell" look */
    }

    /* Media query for desktop-style horizontal scrolling */
    @media (min-width: 768px) {
      .itinerary-grid {
        flex-direction: row;
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      .itinerary-grid .segment-card {
        flex: 0 0 20rem; /* Fixed width for each card on desktop */
        min-height: 20rem; /* Consistent height */
      }
    }
    
    /* Hide scrollbar but keep functionality */
    .itinerary-grid::-webkit-scrollbar {
        display: none;
    }
    .toggle-icon {
      transition: transform 0.3s ease-in-out;
    }
  </style>
</head>
<body>
  <aside class="bg-white rounded-xl p-6 mb-6 md:mb-0">
    <h3 class="text-xl font-bold mb-4 text-gray-800">Itinerary Actions</h3>
    <div class="flex flex-col space-y-2 mb-6">
      <button id="expandAll" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-200">
        Expand All
      </button>
      <button id="collapseAll" class="w-full bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition-colors duration-200">
      Collapse All
      </button>
    </div>
    <h3 class="text-xl font-bold mb-4 text-gray-800">View Days</h3>
    <ul id="dayNav" class="space-y-2">
      <li>
        <button id="showAll" class="w-full text-left px-4 py-2 rounded-lg text-gray-800 bg-gray-200 font-bold hover:bg-gray-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
          Show All
        </button>
      </li>
    </ul>
  </aside>

  <div class="w-full max-w-7xl bg-white rounded-xl overflow-hidden main-container">
    <header class="bg-indigo-950 text-white py-8 px-6 relative">
      <div class="relative z-10 text-center">
        <h1 class="text-4xl font-extrabold tracking-tight">🇯🇵 Japan Itinerary</h1>
        <p class="text-sm mt-2 opacity-80 font-semibold">August 29 – September 8, 2025</p>
      </div>
    </header>
    
    <main id="daySections"></main>
  </div>

  <script>
    // Initial itinerary data
    const itinerary = {
      "Fri 8/29": [
        ["Narita → Shinagawa", "~1 hr 30 min", "¥3,070", "~$20", "Land at 4:45pm; customs; board train", "✈️ Arrival & Reset", "Narita Airport", "Use Suica card for easy transfers", "Booked", "Train"],
        ["Shinagawa → Gotanda", "~6 min", "¥150", "~$1", "Transfer to Yamanote Line; check in", "🏨 Settle In", "OMO5 Tokyo Gotanda", "Grab konbini snacks for late-night cravings", "Booked", "Train"],
        ["—", "—", "—", "—", "Dinner nearby; relax", "🍜 Local Flavor", "Nishigotanda", "Try izakaya for casual bites", "Not Set", "Walk"]
      ],
      "Sat 8/30": [
        ["Gotanda → Shibuya", "8 min", "¥170", "~$1.15", "Lunch at Path or Camelback; Shibuya Crossing", "🛍️ Urban Energy", "Shibuya Crossing", "Shop for vintage bags at Dessert Snow", "Not Set", "Train"],
        ["Shibuya → Harajuku", "3 min", "¥150", "~$1.00", "Omotesando, Meiji Jingu Shrine, Takeshita Street", "🎌 Youth & Tradition", "Meiji Jingu Shrine", "Go early to avoid crowds", "Not Set", "Train"],
        ["Harajuku → Shinjuku", "5 min", "¥150", "~$1.00", "Snack at Usagi Ramen; explore Shinjuku", "🌆 Neon Nights", "Tokyo Metropolitan Gov. Bldg", "Free observation deck views", "Not Set", "Train"],
        ["Shinjuku → Gotanda", "15 min", "¥180", "~$1.20", "Dinner at Kinka Sushi; drinks at SG Club", "🍶 Nightlife", "SG Club", "Reserve SG Club ahead", "Recommended", "Train"]
      ],
      "Sun 8/31": [
        ["Gotanda → Tsukiji", "~30 min", "¥330", "~$2.25", "Explore Tsukiji Outer Market", "🍣 Foodie Day", "Tsukiji Outer Market", "Try tamagoyaki from multiple stalls", "Not Set", "Train"],
        ["Walk to Hamarikyu Gardens", "~10 min", "Free", "Free", "Matcha at teahouse; stroll gardens", "🌿 Zen & Nature", "Hamarikyu Gardens", "Bring insect repellent", "Not Set", "Walk"],
        ["Hamarikyu → Ginza", "~15 min", "¥220", "~$1.50", "Shop Ginza SIX, Mitsukoshi, Itoya", "💎 Luxe & Style", "Ginza", "Visit Itoya for unique gifts", "Not Set", "Train/Walk"],
        ["Ginza → Shinjuku", "~20 min", "¥200", "~$1.35", "Dinner at Udon Shin", "🍜 Hidden Gems", "Udon Shin", "Arrive early—long wait!", "Recommended", "Train"],
        ["Shinjuku → Toranomon Hills", "~20 min", "¥210", "~$1.40", "Drinks at Andaz Rooftop Bar", "🌃 Skyline Views", "Andaz Tokyo", "Dress smart-casual", "Recommended", "Train"],
        ["Toranomon → Gotanda", "~25 min", "¥330", "~$2.25", "Return to hotel", "💤 Wind Down", "Gotanda", "Grab dessert at convenience store", "Not Set", "Train"]
      ],
      "Mon 9/1": [
        ["Gotanda → Toyosu", "~35 min", "¥330", "~$2.25", "Breakfast at Toyosu Market", "🍣 Culinary Adventure", "Sushi Dai", "Arrive before 7am for best seats", "Recommended", "Train"],
        ["Toyosu → Shin-Toyosu", "~5 min", "¥250", "~$1.70", "Visit TeamLab Planets", "🎨 Immersive Art", "TeamLab Planets", "Book tickets online in advance", "Booked", "Train"],
        ["Shin-Toyosu → Asakusa", "~30 min", "¥330", "~$2.25", "Explore Sensoji Temple, Nakamise", "🏮 Old Tokyo", "Sensoji Temple", "Try kibi dango & melonpan", "Not Set", "Train"],
        ["Asakusa → Otemachi", "~15 min", "¥250", "~$1.70", "Dinner at Arva – Aman Tokyo 💗", "🎉 Anniversary Night", "Aman Tokyo", "Confirm reservation in advance", "Booked", "Train"],
        ["Otemachi → Shinjuku", "~20 min", "¥330", "~$2.25", "Explore Golden Gai", "🍶 Retro Vibes", "Golden Gai", "Explore quirky bars", "Not Set", "Train"],
        ["Shinjuku → Azabujuban", "~15 min", "¥250", "~$1.70", "Drinks at Bar Centifolia or Tokyo Confidential", "🍸 Elegant Evenings", "Bulgari Hotel", "Reserve ahead for rooftop seating", "Recommended", "Train"],
        ["Azabujuban → Gotanda", "~25 min", "¥330", "~$2.25", "Return to hotel", "💤 Wind Down", "Gotanda", "—", "Not Set", "Train"]
      ],
      "Tue 9/2": [
        ["Tokyo → Kyoto (Nozomi)", "~2 hr 15 min", "¥14,000", "~$90", "Grab ekiben at Tokyo Station", "🚄 Scenic Shift", "Shinkansen Ride", "Book Nozomi seats early", "Recommended", "Shinkansen"],
        ["Kyoto → Nohga Hotel Kiyomizu", "~20–30 min", "¥500–¥2,000", "~$3–$13", "Check-in", "🏨 Arrival & Refresh", "Nohga Hotel", "Use taxi for comfort", "Booked", "Taxi/Local Train"],
        ["Hotel → Fushimi Inari", "~20 min", "¥200–¥300", "~$2", "Explore red torii gates", "🔴 Spiritual Path", "Fushimi Inari", "Go before sunset for golden light", "Not Set", "Local Train"],
        ["Fushimi → Higashiyama", "~20 min", "¥200–¥300", "~$2", "Hanami-koji, Shirakawa Canal, Tatsumi Shrine", "🏮 Historic Charm", "Gion", "Watch for geisha sightings", "Not Set", "Local Train/Walk"],
        ["Walk to Yasaka Shrine & Kodai-ji", "~10–15 min", "Free", "Free", "Sunset at Kiyomizu-dera", "🌅 Golden Hour", "Kiyomizu-dera", "Bring a tripod for photos", "Not Set", "Walk"],
        ["Taxi to Mouriya", "~15 min", "¥1,000–¥2,000", "~$7–$13", "Wagyu dinner", "🥩 Gourmet Night", "Mouriya", "Reserve table in advance", "Booked", "Taxi"],
        ["Return to hotel", "~15 min", "¥1,000", "~$7", "—", "💤 Wind Down", "Nohga Hotel", "—", "Not Set", "Taxi/Walk"]
      ],
      "Wed 9/3": [
        ["Hotel → Kinkaku-ji", "~30 min", "¥1,000–¥2,000", "~$7–$13", "Visit Golden Pavilion early", "🏯 Iconic Kyoto", "Kinkaku-ji", "Bring a wide-angle lens", "Not Set", "Taxi/Local Train"],
        ["Kinkaku-ji → Arashiyama", "~30–40 min", "¥500–¥1,000", "~$3–$7", "Bamboo Forest, Monkey Park, Sanso Garden", "🌳 Nature & Wildlife", "Arashiyama Bamboo Grove", "Arrive early for fewer crowds", "Not Set", "Bike/Train"],
        ["Arashiyama → Otagi Nenbutsuji", "~15–20 min", "¥500–¥1,000", "~$3–$7", "Visit temples, Kotouen pottery", "⛩️ Temple Hopping", "Otagi Nenbutsuji", "—", "Not Set", "Bike/Taxi"],
        ["Arashiyama → Izumoya", "~30 min", "¥1,500–¥2,500", "~$10–$17", "Dinner at Izumoya by the river", "🍜 Riverfront Dining", "Izumoya", "—", "Not Set", "Taxi"],
        ["Izumoya → Park Hyatt", "~15 min", "¥1,000", "~$7", "Drinks at Kohaku Bar", "🍸 Elegant Evenings", "Park Hyatt", "—", "Not Set", "Taxi"],
        ["Park Hyatt → Hotel", "~20 min", "¥1,000–¥2,000", "~$7–$13", "Return to hotel", "💤 Wind Down", "Nohga Hotel", "—", "Not Set", "Taxi"]
      ],
      "Thu 9/4": [
        ["Kyoto → Osaka", "~30 min", "¥1,500–¥3,000", "~$10–$20", "Visit Osaka Castle", "🏯 Historic Landmark", "Osaka Castle", "—", "Not Set", "Shinkansen/Local Train"],
        ["Osaka Castle → Izakaya Toyo", "~20 min", "¥200–¥300", "~$2", "Street food at Netflix-famous Izakaya Toyo", "🍢 Street Food", "Izakaya Toyo", "—", "Not Set", "Local Train"],
        ["Osaka → Kyoto", "~30 min", "¥1,500–¥3,000", "~$10–$20", "Return to Kyoto", "🚄 City Shift", "—", "—", "Not Set", "Shinkansen/Local Train"],
        ["Kyoto Station → Hotel Mitsui", "~15 min", "¥500–¥1,000", "~$3–$7", "Check-in at 3pm", "🏨 Settle In", "Hotel Mitsui", "—", "Booked", "Train"],
        ["Hotel → Kiyamachi Dori Street", "~10 min", "Free", "Free", "Explore riverside nightlife", "🌃 Neon Nights", "Kiyamachi Dori", "—", "Not Set", "Walk"],
        ["Walk to Sushitetsu", "~5 min", "Free", "Free", "Dinner at Sushitetsu", "🍣 Local Flavor", "Sushitetsu", "—", "Not Set", "Walk"],
        ["Sushitetsu → Hotel Mitsui", "~10 min", "Free", "Free", "Return to hotel", "💤 Wind Down", "Hotel Mitsui", "—", "Not Set", "Walk"]
      ],
      "Fri 9/5": [
        ["Hotel → Tea Ceremony", "~20 min", "¥1,000–¥2,000", "~$7–$13", "Visit Maikoya or Rokujuan", "🍵 Cultural Experience", "Maikoya or Rokujuan", "—", "Recommended", "Taxi/Local"],
        ["Tea Ceremony → Imperial Palace", "~20 min", "¥500–¥1,000", "~$3–$7", "Historical tour of Imperial Palace & Nijo Castle", "🏯 Historic Tour", "Imperial Palace & Nijo Castle", "—", "Not Set", "Local"],
        ["Nijo → Fushimi Inari", "~30 min", "¥300–¥500", "~$2–$4", "Shrine revisit", "⛩️ Spiritual Path", "Fushimi Inari", "—", "Not Set", "Local Train"],
        ["Ninen-zaka → Hotel Mitsui", "~20 min", "¥500–¥1,000", "~$3–$7", "Afternoon massage", "💆‍♀️ Relaxation", "—", "Not Set", "Taxi"],
        ["Hotel Mitsui → Restaurant", "~1 min", "Free", "Free", "Dinner at hotel", "🍽️ Fine Dining", "Hotel Restaurant", "—", "Not Set", "On-site"]
      ],
      "Sat 9/6": [
        ["Kyoto → Odawara", "~2 hr", "¥13,000", "~$85", "Grab breakfast, check out from Hotel Mitsui", "🚄 Scenic Shift", "Shinkansen Ride", "—", "Not Set", "Shinkansen"],
        ["Odawara → Hakone", "~30–45 min", "¥500–¥2,000", "~$3–$13", "Scenic ride into mountains", "⛰️ Nature & Views", "Hakone", "—", "Not Set", "Local Train/Taxi"],
        ["Hakone → Hyatt Regency Hakone", "~15 min", "Free", "Free", "Check-in, relax", "🏨 Settle In", "Hyatt Regency", "—", "Booked", "Shuttle"],
        ["Hotel → Spa Izumi & Onsen", "On-site", "Reservation needed", "Varies", "Spa treatment or hot spring soak", "♨️ Onsen & Spa", "Spa Izumi & Onsen", "Reserve in advance", "Recommended", "On-site"],
        ["Hotel → Dinner", "Varies", "Varies", "Varies", "Optional dinner at hotel or local restaurant", "🍽️ Dinner", "—", "—", "Not Set", "Walk/Taxi"]
      ],
      "Sun 9/7": [
        ["Hotel → Hakone Open-Air Museum", "~10 min", "¥1,000", "~$7", "Sculpture gardens, Picasso Pavilion", "🖼️ Art & Nature", "Hakone Open-Air Museum", "—", "Not Set", "Taxi"],
        ["Museum → Hakone Shrine", "~20–30 min", "¥500–¥1,000", "~$3–$7", "Visit lakeside torii gate", "⛩️ Sacred Site", "Hakone Shrine", "—", "Not Set", "Walk"],
        ["Shrine → Lake Ashi Cruise Pier", "~10 min walk", "Free", "Free", "Board pirate-style sightseeing cruise", "🚢 Lake Cruise", "Lake Ashi", "—", "Not Set", "Walk"],
        ["Cruise Pier → Itoh Dining by Nobu", "~10 min walk", "Free", "Free", "Dinner at Itoh Dining", "🥩 Teppanyaki", "Itoh Dining by Nobu", "Sit at teppanyaki bar", "Recommended", "Walk"],
        ["Itoh → Hotel", "~10–15 min", "¥1,000", "~$7", "Return to Hyatt Regency Hakone", "💤 Wind Down", "Hyatt Regency", "—", "Not Set", "Walk/Taxi"]
      ],
      "Mon 9/8": [
        ["Hotel → Odawara Station", "~45 min", "Free", "Free", "Check out, light breakfast", "✈️ Departure", "Odawara Station", "—", "Not Set", "Shuttle"],
        ["Odawara → Tokyo Station", "~40 min", "¥3,500", "~$23", "Optional snack or coffee at Tokyo Station", "🚄 City Shift", "Tokyo Station", "—", "Not Set", "Shinkansen"],
        ["Tokyo → Narita", "~1 hr", "¥2,700–¥5,500", "~$18–$37", "Final souvenir shopping, relax before flight", "✈️ Departure", "Narita Airport", "Arrive early for check-in and security", "Booked", "Train"]
      ]
    };

    const sectionsContainer = document.getElementById("daySections");
    const dayNavContainer = document.getElementById("dayNav");
    const expandAllButton = document.getElementById("expandAll");
    const collapseAllButton = document.getElementById("collapseAll");
    const showAllButton = document.getElementById("showAll");

    const getStatusClass = (status) => {
      switch (status) {
        case 'Booked': return 'bg-green-100 text-green-700';
        case 'Recommended': return 'bg-orange-100 text-orange-700';
        case 'Canceled': return 'bg-red-100 text-red-700';
        default: return 'bg-gray-200 text-gray-700';
      }
    };

    const createSegmentCard = (segment) => {
      const segmentTitle = segment[5];
      const segmentDetails = segment[0];
      const details = segment[4];
      const notes = segment[7];
      const status = segment[8];

      const travelParts = segmentDetails.includes('→') ? segmentDetails.split(' → ') : [null, null];
      const startLocation = travelParts[0];
      const destinationLocation = travelParts[1];

      const travelDetailsHTML = startLocation && destinationLocation ? `
        <div>
          <span class="font-semibold text-gray-800">Starting Location:</span> ${startLocation}
        </div>
        <div>
          <span class="font-semibold text-gray-800">Destination:</span> ${destinationLocation}
        </div>
      ` : `
        <div class="col-span-2">
          <span class="font-semibold text-gray-800">Segment:</span> ${segmentDetails}
        </div>
      `;

      return `
        <div class="bg-white p-4 rounded-lg shadow-sm mb-4 last:mb-0 segment-card flex flex-col justify-between">
          <div class="mb-2">
            <h4 class="text-lg font-bold text-gray-900">${segmentTitle}</h4>
            <p class="text-sm text-gray-500">${segmentDetails}</p>
          </div>
          
          <div class="grid grid-cols-2 gap-y-1 gap-x-4 text-sm text-gray-600 mb-2">
            ${travelDetailsHTML}
            <div>
              <span class="font-semibold text-gray-800">Travel Time:</span> ${segment[1]}
            </div>
            <div>
              <span class="font-semibold text-gray-800">Travel Type:</span> ${segment[9]}
            </div>
            <div>
              <span class="font-semibold text-gray-800">Cost:</span> ${segment[2]} (${segment[3]})
            </div>
            <div>
              <span class="font-semibold text-gray-800">Location:</span> ${segment[6]}
            </div>
          </div>
          
          <div class="mt-2 text-sm text-gray-700">
            <span class="font-semibold text-gray-800">Details:</span> ${details}
          </div>
          <div class="mt-2 text-sm text-gray-700">
            <span class="font-semibold text-gray-800">Notes:</span> ${notes}
          </div>

          <div class="mt-4">
            <span class="inline-block px-3 py-1 rounded-full text-xs font-semibold ${getStatusClass(status)}">${status}</span>
          </div>
        </div>
      `;
    };
    
    const toggleDay = (dayContainer) => {
      const content = dayContainer.querySelector('.itinerary-content');
      const toggleIcon = dayContainer.querySelector('.toggle-icon');
      
      if (content.style.display === 'none') {
        content.style.display = 'flex';
        toggleIcon.textContent = '▼';
      } else {
        content.style.display = 'none';
        toggleIcon.textContent = '▶';
      }
    };
    
    const renderItinerary = () => {
      Object.entries(itinerary).forEach(([day, segments], index) => {
        const dayId = day.replace(/[\s/]/g, '_');
        const dayContainer = document.createElement("div");
        dayContainer.className = "mb-6 rounded-xl overflow-hidden bg-white day-section";
        dayContainer.id = dayId;

        let cityForDay = '';
        switch (day) {
          case 'Fri 8/29':
          case 'Sat 8/30':
          case 'Sun 8/31':
          case 'Mon 9/1':
            cityForDay = 'Tokyo';
            break;
          case 'Tue 9/2':
          case 'Wed 9/3':
          case 'Fri 9/5':
            cityForDay = 'Kyoto';
            break;
          case 'Thu 9/4':
            cityForDay = 'Osaka';
            break;
          case 'Sat 9/6':
          case 'Sun 9/7':
            cityForDay = 'Hakone';
            break;
          case 'Mon 9/8':
            cityForDay = 'Tokyo';
            break;
        }
        
        const firstSegmentSummary = segments[0][5];
        const header = document.createElement("div");
        header.className = "p-4 md:p-6 bg-blue-800 text-white cursor-pointer hover:bg-blue-700 transition-colors duration-200 flex justify-between items-center";
        header.innerHTML = `
          <div class="flex flex-col items-start flex-grow">
            <h2 class="text-xl font-bold">${day} – ${cityForDay}</h2>
            <p class="text-sm opacity-80 mt-1">${firstSegmentSummary}</p>
          </div>
          <div class="flex items-center space-x-2">
            <span class="toggle-icon text-xl">▼</span>
          </div>
        `;
        
        header.addEventListener('click', () => {
          toggleDay(dayContainer);
        });
        
        dayContainer.appendChild(header);

        const content = document.createElement("div");
        content.className = "px-4 py-8 itinerary-content itinerary-grid";
        content.style.display = 'flex'; // Ensure initial state is visible
        
        const cardHTML = segments.map(createSegmentCard).join('');
        content.innerHTML = cardHTML;
        dayContainer.appendChild(content);

        sectionsContainer.appendChild(dayContainer);

        const navItem = document.createElement("li");
        navItem.innerHTML = `
          <button class="day-filter w-full text-left px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-200 transition-colors duration-200" data-day-id="${dayId}">${day}</button>
        `;
        dayNavContainer.appendChild(navItem);
      });
    };
    
    expandAllButton.addEventListener('click', () => {
      document.querySelectorAll('.itinerary-content').forEach(content => {
        content.style.display = 'flex';
        content.previousElementSibling.querySelector('.toggle-icon').textContent = '▼';
      });
    });

    collapseAllButton.addEventListener('click', () => {
      document.querySelectorAll('.itinerary-content').forEach(content => {
        content.style.display = 'none';
        content.previousElementSibling.querySelector('.toggle-icon').textContent = '▶';
      });
    });
    
    showAllButton.addEventListener('click', () => {
      document.querySelectorAll('.day-section').forEach(section => {
        section.style.display = '';
      });
    });

    dayNavContainer.addEventListener('click', (e) => {
      const dayFilterBtn = e.target.closest('.day-filter');
      if (dayFilterBtn) {
        const dayIdToFilter = dayFilterBtn.dataset.dayId;
        document.querySelectorAll('.day-section').forEach(section => {
          if (section.id === dayIdToFilter) {
            section.style.display = '';
          } else {
            section.style.display = 'none';
          }
        });
      }
    });

    document.addEventListener('DOMContentLoaded', renderItinerary);
  </script>
</body>
</html>
